<!--
  package template
  Used for dynamic data relating to individual packages
-->

<div id='topRowContainer' class='row-fluid'>
  <div id='recentBuildsContent' class='span4 contentContainer'>
    <div id='recentBuildsContentTitle' class='row-fluid'>
      <h3 class='contentTitle span6'>Latest <%= @packageName %> Builds</h3>
    </div>
    <!-- Use a multi-purpose template to generate the table -->
    <%= erb :recentBuildsTable %>
  </div>

  <div id='typeSummaryContent' class='span7 contentContainer'>
    <div id='typeSummaryContentTitle' class='row-fluid'>
      <h3 class='contentTitle span6'><%= @packageName %> Packaging Summaries</h3>
    </div>
    <div class='row-fluid'>
      <div id='typeSummaryBuildNumber' class='span3'>
        <h4 class='contentTitle'>Number of Builds this Month</h4>
        <div id='typeSummaryBuildContent' class='typeChartContent'>
          <div class='yAxisLabel'>Builds</div>
        </div>
      </div>
      <div id='typeSummaryAvgSpeed' class='span3'>
        <h4 class='contentTitle'>Average Speed</h4>
        <div id='typeSummarySpeedContent' class='typeChartContent'>
          <div class='yAxisLabel'>Seconds</div>
        </div>
      </div>
      <div id='typeSummaryHosts' class='span5'>
        <h4 class='contentTitle'>Build Host Usage</h4>
        <div id='typeSummaryHostContent' class='typeChartContent'>
          <div class='yAxisLabel yAxisPushLeft'>Percentage</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id='bottomRowContainer' class='row-fluid'>
  <div id='generalStatsContent' class='span4 contentContainer'>
    <div id='generalStatsContentTitle' class='row-fluid'>
      <h3 class='contentTitle span6'>General <%= @packageName %> Stats</h3>
    </div>
    <div class='row-fluid'>
      <span class='span5'>
        <table id='generalStatsTableLeft' class='table generalStatsTable'>
          <tbody>
            <tr>
              <td class='generalStatsTableLabel'>RC Releases:</td>
              <td id='generalStatsRCReleasesCell' class='generalStatsTableCell'><%= @stats[:general][:RCReleases] %></td>
            </tr>
            <tr>
              <td class='generalStatsTableLabel'>Release Team Builds:</td>
              <td id='generalStatsReleaseBuildsCell' class='generalStatsTableCell'><%= @stats[:general][:releaseBuilds] %></td>
            </tr>
            <tr>
              <td class='generalStatsTableLabel'>FOSS Builds:</td>
              <td id='generalStatsFOSSBuildsCell' class='generalStatsTableCell'><%= @stats[:general][:FOSSBuilds] %></td>
            </tr>
          </tbody>
        </table>
      </span>
      <span class='span5 offset2'>
        <table id='generalStatsTableRight' class='table generalStatsTable'>
          <tbody>
            <tr>
              <td class='generalStatsTableLabel'>Final Releases:</td>
              <td id='generalStatsFinalReleasesCell' class='generalStatsTableCell'><%= @stats[:general][:finalReleases] %></td>
            </tr>
            <tr>
              <td class='generalStatsTableLabel'>Other Team Builds:</td>
              <td id='generalStatsOtherBuildsCell' class='generalStatsTableCell'><%= @stats[:general][:otherBuilds] %></td>
            </tr>
            <tr>
              <td class='generalStatsTableLabel'>PE Builds:</td>
              <td id='generalStatsPEBuildsCell' class='generalStatsTableCell'><%= @stats[:general][:PEBuilds]%></td>
            </tr>
          </tbody>
        </table>
      </span>
    </div>
  </div>
  <div id='distContent' class='span7 contentContainer'>
    <div id='distSpeedContentTitle' class='row-fluid'>
      <h3 class='contentTitle span6'><%= @packageName %> Breakdown by Distribution</h3>
    </div>
      <div id='typeDistSpeed' class='span6'>
        <h4 class='contentTitle'>Average Build Speed</h4>
        <div id='typeDistSpeedContent' class='typeChartContent'>
          <div id='distSpeedYAxis' class='yAxisLabel yAxisPushLeft'>Seconds</div>
        </div>
      </div>
      <div id='typeDistFailure' class='span6'>
        <h4 class='contentTitle'>Failure Rate</h4>
        <div id='typeDistFailureContent' class='typeChartContent'>
          <div id='typeDistFailureYAxis' class='yAxisLabel'>Percentage</div>
        </div>
      </div>
  </div>
</div>

 <!-- Tooltips for graphs and charts, to be styled by D3 -->
   <%= erb :tooltips %>

<script type='text/javascript'>
  $(document).ready(function() {
      // Resize the data sections for small resolutions
    $(function() {
      var recentBuilds = document.getElementById("recentBuildsContent");
      var teamBuilds   = document.getElementById("generalStatsContent");
      if(screen.width < 1600) {
        recentBuilds.style.minWidth = "1300px";
        teamBuilds.style.minWidth   = "1300px";
      } else {
        recentBuilds.style.minWidth = "900px";
        teamBuilds.style.minWidth   = "900px";
      }
    })
  })
</script>








